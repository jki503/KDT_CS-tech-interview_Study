# https 특강

HTTPS : Encryted Connection
HTTP를 암호화해서 보낸다~

## 암호화 알고리즘

- 메시지 다이제스트

메시지의 무결성 검사를 위해 암호 해시 함수를 이용하느 생성하는 크기가 고저정된 값

비 예측성
역상 저항성, 충돌 저항성
MD5, SHA-256, Keccak-256

- 대칭 키

암호화 복호화 같은 키를 사용하는 암호
대킹키를 비밀키라고도 한다
대개 안전하며 암복호 속도가 매우 빠르다.
대칭 키의 공유해야하는 문제가 있다.
AES128-cbc, AES256-GCM

- 공개 키

암호화 보호화에서 서로 다른 키, 비대칭 키를 사용하는 암호
개인키와 공개키, 공개키는 개인키로 유도하여 만든다.
공개 키로 암호화하고, 개인키로 복호화한다.
암복호의 비용이 대칭 키 암호화에 비하여 매우 크다.
DIFFIN-HELLMAN, RSA, ECC, ...

- 전자 서명

공개 키 암호화방식을 이용한 서명
개인 키로 서명하고, 공개키로 검증
A는 원본 파일의 MD를 구하고, 그 MD값을 A의 개인 키로 서명하여 B에게
원본파일과 서명을 보낸다.
B는 이미 가지고 있는 A의 공개 키를 사용하여 A가 보내 온 원본 파일과 서명을 검증
RSA, ECDSA, ...

</br>

## SSL 인증서의 개념

HTTPS는 대칭키를 어떻게 공유 할 것이냐

https는 대칭키 암호화 채널을 생성한다고 해쓴ㄴ데
암호화 되지 않은 통신망에서 대칭키는 어떻게 공유할 것인가?

- 키 교환 과정

공개 키 암호화 방식을 통해 암호화 되지 않은 통신망을 통해 대칭키를
공유

웹브라우저가 서버에게 공개키를 달라고 한 후 서버는 자신의 공개키를 보낸다
웹 브라우저는 대칭키를 생성하여 서버의 공개 키로 암호화 한 후 서버에게 보낸다
서버는 웹브라우저가 보내온 암호화된 대칭 키를 자신의 개인키로 복호화 하여
대칭키를 얻는다
이과정에서 공유된 대칭키를 세션 키라고 한다.

서버가 보내 온 공개키가 진짜 그 서버의 것인지 어떻게 믿을건인지?
중간에서 누가 장난했을 수도 있잖아!

MITM 중간에 누가 껴가지고 공격자가 통신 객체가 전송하는 공개 키를 자신의 공개 키로 바꾸는 것

공개키가 해당 서버의 것인지 믿을 수 있는 어떤 장치가 필요

인증서는 다름아닌 서버의 공개 키를 권위있는 인증기관이 서명한 증서

인증서는 다음정보들의 조합

서버의 공개 키
도메인 이름을 비롯한 서버의 여러 정보를
위의 두가지를 한한 것을 인증 기관이 자신의 개인키로 서명한 값

인증기관
인증서를 발행하는 신뢰 할 수 있는 기관, 놀랍게도 상업적인 기관
CA는 서버가 제출한 서류를 심사하여 자신의 개인키로 서명한 값을 추가한 인증서를 생성하여 서버에게 돈을 받고 준다.
그것도 매년 혹은 격년
각 운영체제와 웹 브라우저는 유명한 CA의 인증서를 미리 가지고 있다.
/usr/local/share/ca-certificates

인증서 예제

암호 모음

키교환

## 전송 계층 보안 TLS

레코드 프로토콜
전송할 자료의 형식 결정
암호화가 이루어짐
TLS 레코드 형태로 전송, 레코드는 패킷의 이름
핸드세이크 프로토콜
자료를 전송하는 방법
이 방법이 바로 키 교환/ 합의 프로토콜

TLS는 자신이 전송하는 자료의 의미는 신경쓰지 않는다.
통신 프로토콜/ 응용프로그램과는 독립적

## 웹서버(ngnix) ssl 설정 방법
